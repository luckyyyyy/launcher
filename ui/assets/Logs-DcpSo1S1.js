import{c as t,L as P,i as e,F as x,b as C,d as h,_ as X,k as y,p as Z,j as J,g as I,M as K,ab as G,P as Q,am as U,an as Y,t as A,D as ee,e as te}from"./vendor-8-YBH5HO.js";import{c as re,g as le,a as ae,e as se,f as j,r as ne}from"./index-Dxcu7CSP.js";import{u as W,z as ie,T as oe,A as ce,L as d,E as de,F as ue,G as q,H as O,I as B,M as ge,c as he,d as ve,B as fe,y as me}from"./index-CzPGTTWR.js";import{C as M}from"./ConfigTitle-CI5ujqvH.js";var be=h('<div class="flex flex-col gap-4"><div><select class="select select-bordered w-full"></select></div><div><select class="select select-bordered w-full"></select></div><div><select class="select select-bordered w-full">'),k=h("<option>");const pe=v=>{const[a]=W();return t(ge,{ref:i=>{var o;return(o=v.ref)==null?void 0:o.call(v,i)},get icon(){return t(P,{size:24})},get title(){return a("logsSettings")},get children(){var i=be(),o=i.firstChild,c=o.firstChild,_=o.nextSibling,p=_.firstChild,w=_.nextSibling,f=w.firstChild;return e(o,t(M,{withDivider:!0,get children(){return a("tableSize")}}),c),c.addEventListener("change",r=>ie(r.target.value)),e(c,t(x,{get each(){return Object.values(oe)},children:r=>(()=>{var s=k();return s.value=r,e(s,()=>a(r)),s})()})),e(_,t(M,{withDivider:!0,get children(){return a("logLevel")}}),p),p.addEventListener("change",r=>ce(r.target.value)),e(p,t(x,{get each(){return[d.Info,d.Error,d.Warning,d.Debug,d.Silent]},children:r=>(()=>{var s=k();return s.value=r,e(s,()=>a(r)),s})()})),e(w,t(M,{withDivider:!0,get children(){return a("logMaxRows")}}),f),f.addEventListener("change",r=>de(parseInt(r.target.value))),e(f,t(x,{each:ue,children:r=>(()=>{var s=k();return s.value=r,e(s,r),s})()})),C(()=>c.value=q()),C(()=>p.value=O()),C(()=>f.value=B()),i}})};var _e=h("<span>"),$e=h('<div class="flex h-full flex-col gap-2"><div class="join w-full"><input type=search class="input input-sm join-item input-primary flex-1 flex-shrink-0 sm:input-md"></div><div class="overflow-x-auto whitespace-nowrap rounded-md bg-base-300"><table><thead class="sticky top-0 z-10"></thead><tbody>'),Se=h("<tr>"),xe=h('<th class=bg-base-200><div class="flex items-center"><div>'),Ce=h('<tr class="hover:!bg-primary hover:text-primary-content">'),we=h("<td class=py-2>");const N=(v,a,i,o)=>{const c=ne(v.getValue(a),i);return o({itemRank:c}),c.passed},Me=()=>{const v=X();if(!he())return v("/setup",{replace:!0}),null;let a;const[i]=W();let o=1;const[c,_]=y([]),p=ve("logs",{level:O()});Z(()=>{const l=p();l&&(_(m=>[{...l,seq:o},...m].slice(0,B())),o++)});const[w,f]=y(""),[r,s]=J(y([]),{name:"logsTableSorting",storage:localStorage}),H=[{header:i("sequence"),accessorFn:l=>l.seq},{header:i("type"),accessorFn:l=>l.type,cell:({row:l})=>{const m=l.original.type;let u="";switch(m){case d.Error:u="text-error";break;case d.Warning:u="text-warning";break;case d.Info:u="text-info";break;case d.Debug:u="text-success";break}return(()=>{var $=_e();return I($,u),e($,()=>`[${l.original.type}]`),$})()}},{header:i("payload"),accessorFn:l=>l.payload}],E=re({filterFns:{fuzzy:N},state:{get globalFilter(){return w()},get sorting(){return r()}},get data(){return c()},sortDescFirst:!0,columns:H,onGlobalFilterChange:f,onSortingChange:s,globalFilterFn:N,getFilteredRowModel:le(),getSortedRowModel:ae(),getCoreRowModel:se()});return(()=>{var l=$e(),m=l.firstChild,u=m.firstChild,$=m.nextSibling,R=$.firstChild,D=R.firstChild,V=D.nextSibling;return u.$$input=n=>f(n.target.value),e(m,t(fe,{class:"join-item btn-sm sm:btn-md",onClick:()=>a==null?void 0:a.showModal(),get icon(){return t(K,{})}}),null),e(D,t(G,{get each(){return E.getHeaderGroups()},children:n=>{const b=n();return(()=>{var g=Se();return e(g,t(G,{get each(){return b.headers},children:L=>{const S=L();return(()=>{var z=xe(),T=z.firstChild,F=T.firstChild;return Q(F,"click",S.column.getToggleSortingHandler(),!0),e(F,()=>j(S.column.columnDef.header,S.getContext())),e(T,()=>({asc:t(U,{}),desc:t(Y,{})})[S.column.getIsSorted()]??null,null),C(()=>I(F,A(S.column.getCanSort()&&"cursor-pointer select-none","flex-1"))),z})()}})),g})()}})),e(V,t(x,{get each(){return E.getRowModel().rows},children:n=>(()=>{var b=Ce();return e(b,t(x,{get each(){return n.getVisibleCells()},children:g=>(()=>{var L=we();return e(L,()=>j(g.column.columnDef.cell,g.getContext())),L})()})),b})()})),e(l,t(pe,{ref:n=>a=n}),null),C(n=>{var b=i("search"),g=A(me(q()),"table relative rounded-none");return b!==n.e&&ee(u,"placeholder",n.e=b),g!==n.t&&I(R,n.t=g),n},{e:void 0,t:void 0}),l})()};te(["input","click"]);export{Me as default};
